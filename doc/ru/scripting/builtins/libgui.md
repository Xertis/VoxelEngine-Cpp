## Содержание

* [Основное](#основное)
* [Локализация](#локализация)
* [Окно и окружение](#окно-и-окружение)
* [Разметка](#разметка)
* [Диалоговые окна](#диалоговые-окна)
* [Документы и шаблоны](#документы-и-шаблоны)
* [Корневой документ](#корневой-документ)

## Основное

- Библиотека содержит функции для доступа к свойствам UI элементов.
- В макетных скриптах доступна переменная document (класс Document).
- Вместо gui следует использовать объектную обертку:
```lua
print(document.some_button.text)
document.some_button.text = "новый текст"
```

## Локализация

```lua
-- Возвращает переведённый текст.
gui.str(text: str, context: str) -> str
```

## Окно и окружение

```lua
-- Возвращает размер главного контейнера (окна).
gui.get_viewport() -> {number, number}

-- Возвращает окружение (глобальные переменные) указанного документа.
gui.get_env(document: string) -> table

-- Возвращает информацию о всех загруженных локалях.
-- Ключ - id локали в формате isolangcode_ISOCOUNTRYCODE
-- Значение - таблица { name: str }
gui.get_locales_info() -> table
```

## Разметка

```lua
-- Удаляет разметку из текста.
gui.clear_markup(
    language: str, -- язык разметки ("md" - Markdown)
    text: str      -- текст с разметкой
) -> str

-- Экранирует разметку в тексте.
gui.escape_markup(
    language: str, -- язык разметки ("md" - Markdown)
    text: str      -- текст с разметкой
) -> str
```

## Диалоговые окна

```lua
-- Выводит окно с сообщением. Не останавливает выполнение кода.
gui.alert(
    message: str,                   -- сообщение (не переводится автоматически, используйте gui.str(...))
    on_ok: function() -> nil        -- вызывается при закрытии
)

-- Запрашивает подтверждение действия. Не останавливает выполнение кода.
gui.confirm(
    -- сообщение (не переводится автоматически, используйте gui.str(...))
    message: str,
    -- функция, вызываемая при подтвержении
    on_confirm: function() -> nil,
    -- функция, вызываемая при отказе/отмене
    [опционально] on_deny: function() -> nil,
    -- текст кнопки подтвержения (по-умолчанию: "Да")
    -- используйте пустую строку для значения по-умолчанию, если нужно указать no_text.
    [опционально] yes_text: str
    -- текст кнопки отказа (по-умолчанию: "Нет")
    [опционально] no_text: str
)
```

## Документы и шаблоны

```lua
-- Загружает UI документ и его скрипт. Возвращает имя документа.
gui.load_document(
    path: str,  -- путь к xml файлу, например: core:layouts/pages/main.xml
    name: str,  -- id документа, например: core:pages/main
    args: table -- параметры для события on_open
) -> str

-- Загружает шаблон в лояут
gui.template(
    -- имя шаблона в layouts/templates без пути и расширения 
    name: str,
    -- таблица переменных (может быть использована в разметке)
    -- * Пр: <label>%{text}</label>
    -- * text в данном случае, это значение из params по ключу text
    params: table,
    -- таблица, доступная в событиях как глобальная переменная DATA
    [опционально] data: table
) -> str
```

## Корневой документ

```lua
-- Корневой UI документ.
gui.root: Document
```
